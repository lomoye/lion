webpackJsonp([1],{536:function(e,t,r){r(564);var i=r(213)(r(549),r(574),"data-v-33e64396",null);e.exports=i.exports},542:function(e,t,r){e.exports={default:r(543),__esModule:!0}},543:function(e,t,r){r(143),r(142),e.exports=r(544)},544:function(e,t,r){var i=r(37),o=r(214);e.exports=r(33).getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},549:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(542),o=r.n(i);t.default={data:function(){return{form:{weight:"",isSport:!1,isBreakfast:!1,isLunch:!1,isDinner:!1,desc:"",day:new Date,images:[],dialogImageUrl:"",dialogVisible:!1},sportPlan:{sportItemList:[]},rules:{weight:[{required:!0,message:"请输入体重"}]}}},created:function(){this.getSportPlan()},methods:{getSportPlan:function(){this.$axios.get("/api/sportPlan").then(function(e){e.data.data&&(this.sportPlan=e.data.data)}.bind(this))},addSportPlan:function(){this.$router.push({name:"addSportPlan"})},addWeightRecord:function(){var e={};e.weight=(100*this.form.weight).toFixed(0),e.isSport=this.form.isSport?1:0,e.isBreakfast=this.form.isBreakfast?1:0,e.isLunch=this.form.isLunch?1:0,e.isDinner=this.form.isDinner?1:0,e.desc=this.form.desc,e.day=this.form.day,e.weightRecordImageList=[];var t=!0,r=!1,i=void 0;try{for(var s,a=o()(this.form.images);!(t=(s=a.next()).done);t=!0){var n=s.value;e.weightRecordImageList.push({imageUrl:n})}}catch(e){r=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw i}}e.sportItemLogList=[];var l=!0,c=!1,f=void 0;try{for(var m,d=o()(this.sportPlan.sportItemList);!(l=(m=d.next()).done);l=!0){var u=m.value;u.checked&&e.sportItemLogList.push({sportItemId:u.id,sportItemName:u.name,sportPlanId:this.sportPlan.id})}}catch(e){c=!0,f=e}finally{try{!l&&d.return&&d.return()}finally{if(c)throw f}}this.$axios.post("/api/weightRecord",e).then(function(e){this.$message.success("记录成功"),this.$router.back()}.bind(this))},onSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.addWeightRecord()})},handleRemove:function(e,t){this.form.images.splice(this.form.images.findIndex(function(t){return t===e.response.data}),1)},handleSuccess:function(e,t,r){this.form.images.push(e.data)},handlePictureCardPreview:function(e){this.form.dialogImageUrl=e.url,this.form.dialogVisible=!0},handleBeforeUpload:function(e){var t="image/jpeg"===e.type,r="image/png"===e.type,i=e.size/1024/1024<2;return t||r||this.$message.error("上传头像图片只能是 JPG 或者 PNG 格式~"),i||this.$message.error("上传头像图片大小不能超过 2MB~"),(t||r)&&i}}}},556:function(e,t,r){t=e.exports=r(532)(!1),t.push([e.i,"",""])},564:function(e,t,r){var i=r(556);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);r(533)("79eb5d06",i,!0)},574:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[r("el-form-item",{attrs:{label:"体重",prop:"weight"}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{type:"number",placeholder:"公斤"},model:{value:e.form.weight,callback:function(t){e.$set(e.form,"weight",t)},expression:"form.weight"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"运动"}},[null==e.sportPlan.sportItemList||0===e.sportPlan.sportItemList.length?r("div",[r("el-checkbox",{staticStyle:{"margin-right":"20px"},model:{value:e.form.isSport,callback:function(t){e.$set(e.form,"isSport",t)},expression:"form.isSport"}}),e._v(" "),r("el-button",{attrs:{type:"danger",plain:""},on:{click:e.addSportPlan}},[e._v("可创建运动计划")])],1):e._e(),e._v(" "),e._l(e.sportPlan.sportItemList,function(t,i){return r("el-checkbox",{key:i,model:{value:t.checked,callback:function(r){e.$set(t,"checked",r)},expression:"item.checked"}},[e._v("\n                "+e._s(t.name)+"\n            ")])})],2),e._v(" "),r("el-form-item",{attrs:{label:"进餐"}},[r("el-checkbox",{model:{value:e.form.isBreakfast,callback:function(t){e.$set(e.form,"isBreakfast",t)},expression:"form.isBreakfast"}},[e._v("早餐")]),e._v(" "),r("el-checkbox",{model:{value:e.form.isLunch,callback:function(t){e.$set(e.form,"isLunch",t)},expression:"form.isLunch"}},[e._v("午餐")]),e._v(" "),r("el-checkbox",{model:{value:e.form.isDinner,callback:function(t){e.$set(e.form,"isDinner",t)},expression:"form.isDinner"}},[e._v("晚餐")])],1),e._v(" "),r("el-form-item",{attrs:{label:"印象"}},[r("el-upload",{attrs:{limit:5,multiple:"",action:"/api/common/picture","list-type":"picture-card","before-upload":e.handleBeforeUpload,"on-success":e.handleSuccess,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[r("i",{staticClass:"el-icon-plus"})]),e._v(" "),r("el-dialog",{attrs:{visible:e.form.dialogVisible},on:{"update:visible":function(t){e.$set(e.form,"dialogVisible",t)}}},[r("img",{attrs:{width:"100%",src:e.form.dialogImageUrl,alt:""}})])],1),e._v(" "),r("el-form-item",{attrs:{label:"备注"}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"可选填"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"日期"}},[r("el-col",{attrs:{span:8}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",readonly:""},model:{value:e.form.day,callback:function(t){e.$set(e.form,"day",t)},expression:"form.day"}})],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit("form")}}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]}}});